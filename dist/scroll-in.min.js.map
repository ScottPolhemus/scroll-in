{"version":3,"sources":["../node_modules/browserify/node_modules/browser-pack/_prelude.js","../src/scroll-in.js"],"names":["ScrollIn","opts","this","options","y","name","value","toLowerCase","normalizeOption","window","addEventListener","update","bind","checkScroll","parseFloat","prototype","targets","document","querySelectorAll","targetMap","i","length","el","rect","getBoundingClientRect","top","percentOffset","hasAttribute","getAttribute","actualOffset","innerHeight","push","map","scrollTop","pageYOffset","scrollBottom","targetY","forEach","targetEl","index","delay","triggerElement","CustomEvent","event","createEvent","initCustomEvent","setTimeout","setAttribute","dispatchEvent","module","exports"],"mappings":"AAAA;ACIA,QAASA,UAASC,GAOhB,GALAC,KAAKC,SACHC,EAAG,KAIFH,EACD,IAAI,GAAII,KAAQJ,GAAM,CACpB,GAAIK,GAAQL,EAAKI,EACjBA,GAAOA,EAAKE,cACZL,KAAKC,QAAQE,GAAQG,gBAAgBH,EAAMC,GAI/CG,OAAOC,iBAAiB,SAAUR,KAAKS,OAAOC,KAAKV,OACnDO,OAAOC,iBAAiB,SAAUR,KAAKW,YAAYD,KAAKV,OAExDA,KAAKS,SACLT,KAAKW,cAGP,QAASL,iBAAgBH,EAAMC,GAC7B,MAAY,MAATD,EACY,QAAVC,EACM,EACW,WAAVA,EACD,GACW,WAAVA,EACD,IAEAQ,WAAWR,GARtB,OAuBFN,SAASe,UAAUJ,OAAS,WAI1B,IAAI,GAHAK,GAAUC,SAASC,iBAAiB,oBACpCC,KAEIC,EAAI,EAAGA,EAAIJ,EAAQK,OAAQD,IAAK,CACtC,GAAIE,GAAKN,EAAQI,GACbG,EAAOD,EAAGE,wBACVC,EAAMF,EAAKE,IAEXC,EAAgBxB,KAAKC,QAAQC,CAE9BkB,GAAGK,aAAa,sBACjBD,EAAgBlB,gBAAgB,IAAKc,EAAGM,aAAa,qBAGvD,IAAIC,GAAepB,OAAOqB,cAAgB,IAAMJ,GAAiB,IAEjED,IAAOI,EAEPV,EAAUM,GAAON,EAAUM,OAC3BN,EAAUM,GAAKM,KAAKT,GAGtBpB,KAAK8B,IAAMb,EACXjB,KAAKW,eAOPb,SAASe,UAAUF,YAAc,WAC/B,GAAIoB,GAAYxB,OAAOyB,YACnBC,EAAeF,EAAYxB,OAAOqB,WAEtC,KAAI,GAAIM,KAAWlC,MAAK8B,IACtB,GAAGG,EAAeC,EAAS,CACzB,GAAIpB,GAAUd,KAAK8B,IAAII,EAEvBpB,GAAQqB,QAAQ,SAASC,EAAUC,GACjC,GAA+C,OAA5CD,EAASV,aAAa,kBAA4B,CAEnD,GAAIY,GAAQ,GAAKD,CAEjBrC,MAAKuC,eAAeH,EAAUE,KAEhC5B,KAAKV,SAUbF,SAASe,UAAU0B,eAAiB,SAASnB,EAAIkB,GAG/C,GAFAA,EAAQA,GAAS,EAES,kBAAhBE,aACR,GAAIC,GAAQ,GAAID,aAAY,iBACvB,CACL,GAAIC,GAAQ1B,SAAS2B,YAAY,cACjCD,GAAME,gBAAgB,aAAa,GAAM,GAG3CC,WAAW,WACTxB,EAAGyB,aAAa,iBAAkB,MAClCzB,EAAG0B,cAAcL,IAChBH,IAGLS,OAAOC,QAAUlD","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Creates a ScrollIn watcher instance.\n * @constructor\n */\nfunction ScrollIn(opts) {\n  // Default options\n  this.options = {\n    y: 100\n  };\n\n  // Options passed to the constructor\n  if(opts) {\n    for(var name in opts) {\n      var value = opts[name];\n      name = name.toLowerCase();\n      this.options[name] = normalizeOption(name, value);\n    }\n  }\n\n  window.addEventListener('resize', this.update.bind(this));\n  window.addEventListener('scroll', this.checkScroll.bind(this));\n\n  this.update();\n  this.checkScroll();\n}\n\nfunction normalizeOption(name, value) {\n  if(name === 'y') {\n    if(value === 'top') {\n      return 0;\n    } else if(value === 'center') {\n      return 50;\n    } else if(value === 'bottom') {\n      return 100;\n    } else {\n      return parseFloat(value);\n    }\n  }\n}\n\n/**\n * Updates the internal map of target elements.\n * Elements are arranged by vertical offset in the format:\n * { \n *   1000: [el, el]\n *   1800: [el]\n *   1900: [el]\n *   2000: [el, el, el]\n * }\n */\nScrollIn.prototype.update = function() {\n  var targets = document.querySelectorAll('[data-scroll-in]');\n  var targetMap = {};\n\n  for(var i = 0; i < targets.length; i++) {\n    var el = targets[i];\n    var rect = el.getBoundingClientRect();\n    var top = rect.top;\n\n    var percentOffset = this.options.y;\n\n    if(el.hasAttribute('data-scroll-in-y')) {\n      percentOffset = normalizeOption('y', el.getAttribute('data-scroll-in-y'));\n    }\n\n    var actualOffset = window.innerHeight * ((100 - percentOffset) / 100);\n\n    top += actualOffset;\n\n    targetMap[top] = targetMap[top] || [];\n    targetMap[top].push(el);\n  }\n\n  this.map = targetMap;\n  this.checkScroll();\n};\n\n/**\n * Iterates through the target map and triggers\n * any element groups above the current scroll position.\n */\nScrollIn.prototype.checkScroll = function() {\n  var scrollTop = window.pageYOffset;\n  var scrollBottom = scrollTop + window.innerHeight;\n\n  for(var targetY in this.map) {\n    if(scrollBottom > targetY) {\n      var targets = this.map[targetY];\n\n      targets.forEach(function(targetEl, index) {\n        if(targetEl.getAttribute('data-scroll-in') !== 'in') {\n          // Stagger simultaneous events\n          var delay = 50 * index;\n\n          this.triggerElement(targetEl, delay);\n        }\n      }.bind(this));\n    }\n  }\n}\n\n/**\n * Triggers the scroll-in event on an element.\n * @param el - The element to be triggered.\n * @param delay - Delay (in milliseconds) before triggering element.\n */\nScrollIn.prototype.triggerElement = function(el, delay) {\n  delay = delay || 0;\n\n  if(typeof CustomEvent === 'function') {\n    var event = new CustomEvent('scroll-in');\n  } else {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('scroll-in', true, true);\n  }\n\n  setTimeout(function() {\n    el.setAttribute('data-scroll-in', 'in');\n    el.dispatchEvent(event);\n  }, delay);\n}\n\nmodule.exports = ScrollIn;\n"]}