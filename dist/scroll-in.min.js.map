{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","../src/scroll-in.js"],"names":["ScrollIn","opts","this","options","stagger","y","name","value","toLowerCase","parseOption","window","addEventListener","update","bind","checkScroll","triggerScrollIn","el","delay","CustomEvent","event","document","createEvent","initCustomEvent","setTimeout","requestAnimationFrame","setAttribute","dispatchEvent","parseFloat","prototype","targets","querySelectorAll","targetMap","i","length","rect","getBoundingClientRect","top","percentOffset","hasAttribute","getAttribute","actualOffset","innerHeight","push","map","scrollTop","pageYOffset","scrollBottom","targetIndex","targetY","targetDelay","forEach","targetEl","index","module","exports"],"mappings":"AAAA;ACIA,QAASA,UAASC,GAQhB,GANAC,KAAKC,SACHC,QAAS,GACTC,EAAG,KAIFJ,EACD,IAAI,GAAIK,KAAQL,GAAM,CACpB,GAAIM,GAAQN,EAAKK,EACjBA,GAAOA,EAAKE,cACZN,KAAKC,QAAQG,GAAQG,YAAYH,EAAMC,GAI3CG,OAAOC,iBAAiB,SAAUT,KAAKU,OAAOC,KAAKX,OACnDQ,OAAOC,iBAAiB,SAAUT,KAAKY,YAAYD,KAAKX,OAExDA,KAAKU,SACLV,KAAKY,cA6EP,QAASC,iBAAgBC,EAAIC,GAG3B,GAFAA,EAAQA,GAAS,EAES,kBAAhBC,aACR,GAAIC,GAAQ,GAAID,aAAY,iBACvB,CACL,GAAIC,GAAQC,SAASC,YAAY,cACjCF,GAAMG,gBAAgB,aAAa,GAAM,GAG3CC,WAAW,WACTC,sBAAsB,WACpBR,EAAGS,aAAa,iBAAkB,MAClCT,EAAGU,cAAcP,MAElBF,GAQL,QAASR,aAAYH,EAAMC,GACzB,MAAY,MAATD,EACY,QAAVC,EACM,EACW,WAAVA,EACD,GACW,WAAVA,EACD,IAEAoB,WAAWpB,GARtB,OAxFFP,SAAS4B,UAAUhB,OAAS,WAI1B,IAAI,GAHAiB,GAAUT,SAASU,iBAAiB,oBACpCC,KAEIC,EAAI,EAAGA,EAAIH,EAAQI,OAAQD,IAAK,CACtC,GAAIhB,GAAKa,EAAQG,GACbE,EAAOlB,EAAGmB,wBACVC,EAAMF,EAAKE,IAEXC,EAAgBnC,KAAKC,QAAQE,CAE9BW,GAAGsB,aAAa,sBACjBD,EAAgB5B,YAAY,IAAKO,EAAGuB,aAAa,qBAGnD,IAAIC,GAAe9B,OAAO+B,cAAgB,IAAMJ,GAAiB,IAEjED,IAAOI,EAEPT,EAAUK,GAAOL,EAAUK,OAC3BL,EAAUK,GAAKM,KAAK1B,GAGtBd,KAAKyC,IAAMZ,EACX7B,KAAKY,eAOPd,SAAS4B,UAAUd,YAAc,WAC/B,GAAI8B,GAAYlC,OAAOmC,YACnBC,EAAeF,EAAYlC,OAAO+B,YAClCM,EAAc,CAElB,KAAI,GAAIC,KAAW9C,MAAKyC,IAAK,CAC3B,GAAIM,GAAc/C,KAAKC,QAAQC,QAAU2C,CAQzC,IANGH,EAAYI,EACbC,EAAc,EAEdF,IAGCD,EAAeE,EAAS,CACzB,GAAInB,GAAU3B,KAAKyC,IAAIK,EAEvBnB,GAAQqB,QAAQ,SAASC,EAAUC,GACjC,GAA+C,OAA5CD,EAASZ,aAAa,kBAA4B,CACnD,GAAItB,GAAQgC,EAAe/C,KAAKC,QAAQC,QAAUgD,CAElDrC,iBAAgBoC,EAAUlC,KAE5BJ,KAAKX,UA+CbmD,OAAOC,QAAUtD","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Creates a ScrollIn watcher instance.\n * @constructor\n */\nfunction ScrollIn(opts) {\n  // Default options\n  this.options = {\n    stagger: 50,\n    y: 100\n  };\n\n  // Options passed to the constructor\n  if(opts) {\n    for(var name in opts) {\n      var value = opts[name];\n      name = name.toLowerCase();\n      this.options[name] = parseOption(name, value);\n    }\n  }\n\n  window.addEventListener('resize', this.update.bind(this));\n  window.addEventListener('scroll', this.checkScroll.bind(this));\n\n  this.update();\n  this.checkScroll();\n}\n\n/**\n * Updates the internal map of target elements.\n * Elements are arranged by vertical offset in the format:\n * { \n *   1000: [el, el]\n *   1800: [el]\n *   1900: [el]\n *   2000: [el, el, el]\n * }\n */\nScrollIn.prototype.update = function() {\n  var targets = document.querySelectorAll('[data-scroll-in]');\n  var targetMap = {};\n\n  for(var i = 0; i < targets.length; i++) {\n    var el = targets[i];\n    var rect = el.getBoundingClientRect();\n    var top = rect.top;\n\n    var percentOffset = this.options.y;\n\n    if(el.hasAttribute('data-scroll-in-y')) {\n      percentOffset = parseOption('y', el.getAttribute('data-scroll-in-y'));\n    }\n\n    var actualOffset = window.innerHeight * ((100 - percentOffset) / 100);\n\n    top += actualOffset;\n\n    targetMap[top] = targetMap[top] || [];\n    targetMap[top].push(el);\n  }\n\n  this.map = targetMap;\n  this.checkScroll();\n};\n\n/**\n * Iterates through the target map and triggers\n * any element groups above the current scroll position.\n */\nScrollIn.prototype.checkScroll = function() {\n  var scrollTop = window.pageYOffset;\n  var scrollBottom = scrollTop + window.innerHeight;\n  var targetIndex = 0;\n\n  for(var targetY in this.map) {\n    var targetDelay = this.options.stagger * targetIndex;\n\n    if(scrollTop > targetY) {\n      targetDelay = 0;\n    } else {\n      targetIndex++;\n    }\n\n    if(scrollBottom > targetY) {\n      var targets = this.map[targetY];\n\n      targets.forEach(function(targetEl, index) {\n        if(targetEl.getAttribute('data-scroll-in') !== 'in') {\n          var delay = targetDelay + (this.options.stagger * index);\n\n          triggerScrollIn(targetEl, delay);\n        }\n      }.bind(this));\n    }\n  }\n}\n\n/**\n * Triggers the scroll-in event on an element.\n * @param el - The element to be triggered.\n * @param delay - Delay (in milliseconds) before triggering element.\n */\nfunction triggerScrollIn(el, delay) {\n  delay = delay || 0;\n\n  if(typeof CustomEvent === 'function') {\n    var event = new CustomEvent('scroll-in');\n  } else {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('scroll-in', true, true);\n  }\n\n  setTimeout(function() {\n    requestAnimationFrame(function() {\n      el.setAttribute('data-scroll-in', 'in');\n      el.dispatchEvent(event);\n    });\n  }, delay);\n}\n\n/**\n * Parses the value of an option and returns the normalized value.\n * @param el - The element to be triggered.\n * @param delay - Delay (in milliseconds) before triggering element.\n */\nfunction parseOption(name, value) {\n  if(name === 'y') {\n    if(value === 'top') {\n      return 0;\n    } else if(value === 'center') {\n      return 50;\n    } else if(value === 'bottom') {\n      return 100;\n    } else {\n      return parseFloat(value);\n    }\n  }\n}\n\nmodule.exports = ScrollIn;\n"]}