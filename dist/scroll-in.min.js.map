{"version":3,"sources":["../node_modules/browserify/node_modules/browser-pack/_prelude.js","../src/scroll-in.js"],"names":["ScrollIn","this","updateTargetMap","checkScrollPosition","window","addEventListener","bind","prototype","targets","document","querySelectorAll","targetMap","i","length","el","rect","getBoundingClientRect","top","push","map","scrollTop","pageYOffset","scrollBottom","innerHeight","targetY","forEach","targetEl","index","getAttribute","delay","triggerElement","CustomEvent","event","createEvent","initCustomEvent","setTimeout","setAttribute","dispatchEvent","module","exports"],"mappings":"AAAA;ACIA,QAASA,YACPC,KAAKC,kBACLD,KAAKE,sBAELC,OAAOC,iBAAiB,SAAUJ,KAAKC,gBAAgBI,KAAKL,OAC5DG,OAAOC,iBAAiB,SAAUJ,KAAKE,oBAAoBG,KAAKL,OAalED,SAASO,UAAUL,gBAAkB,WAInC,IAAI,GAHAM,GAAUC,SAASC,iBAAiB,oBACpCC,KAEIC,EAAI,EAAGA,EAAIJ,EAAQK,OAAQD,IAAK,CACtC,GAAIE,GAAKN,EAAQI,GACbG,EAAOD,EAAGE,wBACVC,EAAMF,EAAKE,GAEfN,GAAUM,GAAON,EAAUM,OAC3BN,EAAUM,GAAKC,KAAKJ,GAGtBb,KAAKkB,IAAMR,GAObX,SAASO,UAAUJ,oBAAsB,WACvC,GAAIiB,GAAYhB,OAAOiB,YACnBC,EAAeF,EAAYhB,OAAOmB,WAEtC,KAAI,GAAIC,KAAWvB,MAAKkB,IACtB,GAAGG,EAAeE,EAAS,CACzB,GAAIhB,GAAUP,KAAKkB,IAAIK,EAEvBhB,GAAQiB,QAAQ,SAASC,EAAUC,GACjC,GAA+C,OAA5CD,EAASE,aAAa,kBAA4B,CAEnD,GAAIC,GAAQ,GAAKF,CAEjB1B,MAAK6B,eAAeJ,EAAUG,KAEhCvB,KAAKL,SAUbD,SAASO,UAAUuB,eAAiB,SAAShB,EAAIe,GAG/C,GAFAA,EAAQA,GAAS,EAEdzB,OAAO2B,YACR,GAAIC,GAAQ,GAAID,aAAY,iBACvB,CACL,GAAIC,GAAQvB,SAASwB,YAAY,cACjCD,GAAME,gBAAgB,aAAa,GAAM,GAG3CC,WAAW,WACTrB,EAAGsB,aAAa,iBAAkB,MAClCtB,EAAGuB,cAAcL,IAChBH,IAGLS,OAAOC,QAAUvC","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Creates a ScrollIn watcher instance.\n * @constructor\n */\nfunction ScrollIn() {\n  this.updateTargetMap();\n  this.checkScrollPosition();\n\n  window.addEventListener('resize', this.updateTargetMap.bind(this));\n  window.addEventListener('scroll', this.checkScrollPosition.bind(this));\n}\n\n/**\n * Updates the internal map of target elements.\n * Elements are arranged by vertical offset in the format:\n * { \n *   1000: [el, el]\n *   1800: [el]\n *   1900: [el]\n *   2000: [el, el, el]\n * }\n */\nScrollIn.prototype.updateTargetMap = function() {\n  var targets = document.querySelectorAll('[data-scroll-in]');\n  var targetMap = {};\n\n  for(var i = 0; i < targets.length; i++) {\n    var el = targets[i];\n    var rect = el.getBoundingClientRect();\n    var top = rect.top;\n\n    targetMap[top] = targetMap[top] || [];\n    targetMap[top].push(el);\n  }\n\n  this.map = targetMap;\n};\n\n/**\n * Iterates through the target map and triggers\n * any element groups above the current scroll position.\n */\nScrollIn.prototype.checkScrollPosition = function() {\n  var scrollTop = window.pageYOffset;\n  var scrollBottom = scrollTop + window.innerHeight;\n\n  for(var targetY in this.map) {\n    if(scrollBottom > targetY) {\n      var targets = this.map[targetY];\n\n      targets.forEach(function(targetEl, index) {\n        if(targetEl.getAttribute('data-scroll-in') !== 'in') {\n          // Stagger simultaneous events\n          var delay = 50 * index;\n\n          this.triggerElement(targetEl, delay);\n        }\n      }.bind(this));\n    }\n  }\n}\n\n/**\n * Triggers the scroll-in event on an element.\n * @param el - The element to be triggered.\n * @param delay - Delay (in milliseconds) before triggering element.\n */\nScrollIn.prototype.triggerElement = function(el, delay) {\n  delay = delay || 0;\n\n  if(window.CustomEvent) {\n    var event = new CustomEvent('scroll-in');\n  } else {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('scroll-in', true, true);\n  }\n\n  setTimeout(function() {\n    el.setAttribute('data-scroll-in', 'in');\n    el.dispatchEvent(event);\n  }, delay);\n}\n\nmodule.exports = ScrollIn;\n"]}