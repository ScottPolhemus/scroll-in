{"version":3,"sources":["../node_modules/browserify/node_modules/browser-pack/_prelude.js","../src/scroll-in.js"],"names":["ScrollIn","opts","this","options","y","stagger","name","value","toLowerCase","normalizeOption","window","addEventListener","update","bind","checkScroll","parseFloat","parseInt","prototype","targets","document","querySelectorAll","targetMap","i","length","el","rect","getBoundingClientRect","top","percentOffset","hasAttribute","getAttribute","actualOffset","innerHeight","push","map","scrollTop","pageYOffset","scrollBottom","targetY","targetYDelay","forEach","targetEl","index","delay","triggerElement","CustomEvent","event","createEvent","initCustomEvent","setTimeout","requestAnimationFrame","setAttribute","dispatchEvent","module","exports"],"mappings":"AAAA;ACIA,QAASA,UAASC,GAQhB,GANAC,KAAKC,SACHC,EAAG,IACHC,QAAS,IAIRJ,EACD,IAAI,GAAIK,KAAQL,GAAM,CACpB,GAAIM,GAAQN,EAAKK,EACjBA,GAAOA,EAAKE,cACZN,KAAKC,QAAQG,GAAQG,gBAAgBH,EAAMC,GAI/CG,OAAOC,iBAAiB,SAAUT,KAAKU,OAAOC,KAAKX,OACnDQ,OAAOC,iBAAiB,SAAUT,KAAKY,YAAYD,KAAKX,OAExDA,KAAKU,SACLV,KAAKY,cAGP,QAASL,iBAAgBH,EAAMC,GAC7B,MAAY,MAATD,EACY,QAAVC,EACM,EACW,WAAVA,EACD,GACW,WAAVA,EACD,IAEAQ,WAAWR,GAEH,YAATD,EACDU,SAAST,GADX,OAeTP,SAASiB,UAAUL,OAAS,WAI1B,IAAI,GAHAM,GAAUC,SAASC,iBAAiB,oBACpCC,KAEIC,EAAI,EAAGA,EAAIJ,EAAQK,OAAQD,IAAK,CACtC,GAAIE,GAAKN,EAAQI,GACbG,EAAOD,EAAGE,wBACVC,EAAMF,EAAKE,IAEXC,EAAgB1B,KAAKC,QAAQC,CAE9BoB,GAAGK,aAAa,sBACjBD,EAAgBnB,gBAAgB,IAAKe,EAAGM,aAAa,qBAGvD,IAAIC,GAAerB,OAAOsB,cAAgB,IAAMJ,GAAiB,IAEjED,IAAOI,EAEPV,EAAUM,GAAON,EAAUM,OAC3BN,EAAUM,GAAKM,KAAKT,GAGtBtB,KAAKgC,IAAMb,EACXnB,KAAKY,eAOPd,SAASiB,UAAUH,YAAc,WAC/B,GAAIqB,GAAYzB,OAAO0B,YACnBC,EAAeF,EAAYzB,OAAOsB,WAEtC,KAAI,GAAIM,KAAWpC,MAAKgC,IAAK,CAC3B,GAAIK,GAAe,CAEnB,IAAGF,EAAeC,EAAS,CACzB,GAAIpB,GAAUhB,KAAKgC,IAAII,EACvBC,IAAgBrC,KAAKC,QAAQE,QAE7Ba,EAAQsB,QAAQ,SAASC,EAAUC,GACjC,GAA+C,OAA5CD,EAASX,aAAa,kBAA4B,CAEnD,GAAIa,GAAQJ,EAAgB,GAAKG,CAEjCxC,MAAK0C,eAAeH,EAAUE,KAEhC9B,KAAKX,UAUbF,SAASiB,UAAU2B,eAAiB,SAASpB,EAAImB,GAG/C,GAFAA,EAAQA,GAAS,EAES,kBAAhBE,aACR,GAAIC,GAAQ,GAAID,aAAY,iBACvB,CACL,GAAIC,GAAQ3B,SAAS4B,YAAY,cACjCD,GAAME,gBAAgB,aAAa,GAAM,GAG3CC,WAAW,WACTC,sBAAsB,WACpB1B,EAAG2B,aAAa,iBAAkB,MAClC3B,EAAG4B,cAAcN,MAElBH,IAGLU,OAAOC,QAAUtD","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Creates a ScrollIn watcher instance.\n * @constructor\n */\nfunction ScrollIn(opts) {\n  // Default options\n  this.options = {\n    y: 100,\n    stagger: 50\n  };\n\n  // Options passed to the constructor\n  if(opts) {\n    for(var name in opts) {\n      var value = opts[name];\n      name = name.toLowerCase();\n      this.options[name] = normalizeOption(name, value);\n    }\n  }\n\n  window.addEventListener('resize', this.update.bind(this));\n  window.addEventListener('scroll', this.checkScroll.bind(this));\n\n  this.update();\n  this.checkScroll();\n}\n\nfunction normalizeOption(name, value) {\n  if(name === 'y') {\n    if(value === 'top') {\n      return 0;\n    } else if(value === 'center') {\n      return 50;\n    } else if(value === 'bottom') {\n      return 100;\n    } else {\n      return parseFloat(value);\n    }\n  } else if(name === 'stagger') {\n    return parseInt(value);\n  }\n}\n\n/**\n * Updates the internal map of target elements.\n * Elements are arranged by vertical offset in the format:\n * { \n *   1000: [el, el]\n *   1800: [el]\n *   1900: [el]\n *   2000: [el, el, el]\n * }\n */\nScrollIn.prototype.update = function() {\n  var targets = document.querySelectorAll('[data-scroll-in]');\n  var targetMap = {};\n\n  for(var i = 0; i < targets.length; i++) {\n    var el = targets[i];\n    var rect = el.getBoundingClientRect();\n    var top = rect.top;\n\n    var percentOffset = this.options.y;\n\n    if(el.hasAttribute('data-scroll-in-y')) {\n      percentOffset = normalizeOption('y', el.getAttribute('data-scroll-in-y'));\n    }\n\n    var actualOffset = window.innerHeight * ((100 - percentOffset) / 100);\n\n    top += actualOffset;\n\n    targetMap[top] = targetMap[top] || [];\n    targetMap[top].push(el);\n  }\n\n  this.map = targetMap;\n  this.checkScroll();\n};\n\n/**\n * Iterates through the target map and triggers\n * any element groups above the current scroll position.\n */\nScrollIn.prototype.checkScroll = function() {\n  var scrollTop = window.pageYOffset;\n  var scrollBottom = scrollTop + window.innerHeight;\n\n  for(var targetY in this.map) {\n    var targetYDelay = 0;\n\n    if(scrollBottom > targetY) {\n      var targets = this.map[targetY];\n      targetYDelay += this.options.stagger;\n\n      targets.forEach(function(targetEl, index) {\n        if(targetEl.getAttribute('data-scroll-in') !== 'in') {\n          // Stagger simultaneous events\n          var delay = targetYDelay + (50 * index);\n\n          this.triggerElement(targetEl, delay);\n        }\n      }.bind(this));\n    }\n  }\n}\n\n/**\n * Triggers the scroll-in event on an element.\n * @param el - The element to be triggered.\n * @param delay - Delay (in milliseconds) before triggering element.\n */\nScrollIn.prototype.triggerElement = function(el, delay) {\n  delay = delay || 0;\n\n  if(typeof CustomEvent === 'function') {\n    var event = new CustomEvent('scroll-in');\n  } else {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('scroll-in', true, true);\n  }\n\n  setTimeout(function() {\n    requestAnimationFrame(function() {\n      el.setAttribute('data-scroll-in', 'in');\n      el.dispatchEvent(event);\n    });\n  }, delay);\n}\n\nmodule.exports = ScrollIn;\n"]}